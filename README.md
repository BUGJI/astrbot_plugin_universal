# ⭐ 万能插件

这是一个适用于AstrBot的万能插件，它可以基于其它群的bot来扩展自己的业务

<img width="300" height="335" alt="运行效果" src="https://github.com/user-attachments/assets/7d0b7bc5-8f3a-4560-b44a-31812c52c80f" />

此插件使用b2b技术（bot to bot）来请求，可以多个bot串联进行业务共享

# ❗ 注意事项

- 此插件需要自己编写其它bot的命令，并且写明注解
- 此插件不能保证业务可用性，失败的请求不会进行重试
- 此插件只能以bot本身身份请求其它群聊，类似运势和签到插件可能无法
- 请确保将总调用风险降到最低，如果需要使用此调用其他人的bot，请确保经过其所有者同意

# ⚙ 配置

你需要由自己定义一些项目

按照 ```botQQ;候选群号;触发命令;返回方式;功能注解``` 填写

| 项目 | 注解 |
| ---- | ---- |
| botQQ | 需要触发的bot的QQ号 |
| 候选群号 | 允许在什么群触发，用逗号分隔多个群 |
| 触发命令 | 用于触发bot的命令包含触发前缀，填写@符号可以艾特此bot |
| 返回方式 | 可以填写@或者m<br>@ 则在机器人收到艾特则取结果<br>m 则机器人返回消息则获取结果（不一定是业务本身的消息） |
| 功能注解 | 用于介绍此功能的含义 |

> 例如：123456789;114514,1919810;/每日一言;@;用于获取每日一言

| 参数 | 注解 |
| ----------------- | ----|
| known_bots_action | 用于配置机器人的功能，依据上方格式填写，一行一个 |
| rate_per_minute | 用于限制插件每分钟的请求数量（默认5） |
| timeout | 用于调整任务超时时间（默认30）按秒 |
| timeout_message | 超时后回复的内容 |
| unreachable_message | 不可达回复的内容 |

*此插件仅能以bot自身身份调用插件， 运势、签到 等插件约等于无作用*

# 🐓 技术栈
astrbot 的插件开发指南指出可实现此项目的核心api：

- 主动发送消息（用于请求bot）
- 获取消息来源（获取消息来源群号和QQ号，可以分辨机器人发送的图片）
- 阻止原先LLM输出（针对此bot来源阻止非命令消息，防止发生死锁，而且允许其它bot用此方法调用功能）
- 注册LLM工具（用于告诉AI有什么工具被注册）

# ❤ 特别感谢

| 名字 | 活 |
| ---- | ---- |
| ChatGPT | 编写一整个代码，验证项目可行性与逻辑闭环 |
| 盐酸 | 吉祥物 |

> 其实此bot的任何逻辑都没有实现，生成的代码甚至没有在本地跑过，排除作者懒的话真用上至少100个安全风险
> 如果你想以此项目名字实际编写并且上架插件市场，可以联系我删除或者转移项目所有者
